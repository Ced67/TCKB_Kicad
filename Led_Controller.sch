EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:TCKB
LIBS:TCKB-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 2 4
Title "TCKB :Tiny Custom KeyBoard (STM32L)"
Date ""
Rev "1.1"
Comp "/u/Ced67"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L GNDPWR #PWR019
U 1 1 5663605A
P 6850 4900
F 0 "#PWR019" H 6850 4700 50  0001 C CNN
F 1 "GNDPWR" H 6850 4770 50  0000 C CNN
F 2 "" H 6850 4850 60  0000 C CNN
F 3 "" H 6850 4850 60  0000 C CNN
	1    6850 4900
	1    0    0    -1  
$EndComp
Wire Wire Line
	6400 4750 6400 4800
Wire Wire Line
	6400 4800 7000 4800
Wire Wire Line
	7000 4800 7000 4750
Wire Wire Line
	6550 4750 6550 4800
Connection ~ 6550 4800
Wire Wire Line
	6700 4750 6700 4800
Connection ~ 6700 4800
$Comp
L CP C14
U 1 1 5663606A
P 9850 1050
F 0 "C14" H 9875 1150 50  0000 L CNN
F 1 "100nF" H 9875 950 50  0000 L CNN
F 2 "TCKB:C_0805" H 9888 900 30  0001 C CNN
F 3 "" H 9850 1050 60  0000 C CNN
	1    9850 1050
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR020
U 1 1 56636077
P 9650 1300
F 0 "#PWR020" H 9650 1100 50  0001 C CNN
F 1 "GNDPWR" H 9650 1170 50  0000 C CNN
F 2 "" H 9650 1250 60  0000 C CNN
F 3 "" H 9650 1250 60  0000 C CNN
	1    9650 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	9650 1300 9650 1250
Text GLabel 10050 5200 0    60   Output ~ 0
SWCLK_2
Text GLabel 10050 5300 0    60   BiDi ~ 0
SWDIO_2
Text GLabel 8900 5500 0    60   Output ~ 0
NRST_2
Text GLabel 9100 3150 2    60   Input ~ 0
SWCLK_2
Text GLabel 9100 3050 2    60   BiDi ~ 0
SWDIO_2
Text GLabel 4850 1600 0    60   Input ~ 0
NRST_2
Text GLabel 4850 3150 0    60   Output ~ 0
SWO_2
Wire Wire Line
	8200 3050 9100 3050
Wire Wire Line
	8200 3150 9100 3150
Wire Wire Line
	6400 1250 6400 1200
Wire Wire Line
	6400 1200 7000 1200
Wire Wire Line
	7000 1200 7000 1250
Wire Wire Line
	6700 1250 6700 1200
Connection ~ 6700 1200
Wire Wire Line
	6550 1250 6550 1200
Connection ~ 6550 1200
$Comp
L STM32L053C8 U4
U 1 1 566360B1
P 6700 3000
F 0 "U4" H 5400 4650 50  0000 C CNN
F 1 "STM32L151CBT6-A" H 7750 1350 50  0000 C CNN
F 2 "TCKB:TQFP-48_7x7mm_Pitch0.5mm" H 6700 3000 50  0000 C CNN
F 3 "" H 6700 3000 60  0000 C CNN
	1    6700 3000
	1    0    0    -1  
$EndComp
Text Notes 10050 1500 0    60   ~ 0
STM32 Coupling
$Comp
L CP C15
U 1 1 566360BE
P 10150 1050
F 0 "C15" H 10175 1150 50  0000 L CNN
F 1 "100nF" H 10175 950 50  0000 L CNN
F 2 "TCKB:C_0805" H 10188 900 30  0001 C CNN
F 3 "" H 10150 1050 60  0000 C CNN
	1    10150 1050
	1    0    0    -1  
$EndComp
$Comp
L CP C17
U 1 1 566360C5
P 10750 1050
F 0 "C17" H 10775 1150 50  0000 L CNN
F 1 "100nF" H 10775 950 50  0000 L CNN
F 2 "TCKB:C_0805" H 10788 900 30  0001 C CNN
F 3 "" H 10750 1050 60  0000 C CNN
	1    10750 1050
	1    0    0    -1  
$EndComp
$Comp
L CP C16
U 1 1 566360D3
P 10450 1050
F 0 "C16" H 10475 1150 50  0000 L CNN
F 1 "100nF" H 10475 950 50  0000 L CNN
F 2 "TCKB:C_0805" H 10488 900 30  0001 C CNN
F 3 "" H 10450 1050 60  0000 C CNN
	1    10450 1050
	1    0    0    -1  
$EndComp
NoConn ~ 5200 2300
Wire Wire Line
	9650 850  10750 850 
Wire Wire Line
	10750 850  10750 900 
Wire Wire Line
	9650 1250 10750 1250
Wire Wire Line
	10750 1250 10750 1200
Wire Wire Line
	10450 1200 10450 1250
Connection ~ 10450 1250
Wire Wire Line
	10150 1200 10150 1250
Connection ~ 10150 1250
Wire Wire Line
	9850 1200 9850 1250
Connection ~ 9850 1250
Wire Wire Line
	9850 900  9850 850 
Connection ~ 9850 850 
Wire Wire Line
	10150 900  10150 850 
Connection ~ 10150 850 
Wire Wire Line
	10450 900  10450 850 
Connection ~ 10450 850 
Text GLabel 10050 5800 0    60   Input ~ 0
USART_RX_2
Text GLabel 10050 5700 0    60   Output ~ 0
USART_TX_2
Text GLabel 9100 2750 2    60   Input ~ 0
USART_RX_2
Text GLabel 9100 2650 2    60   Output ~ 0
USART_TX_2
Wire Wire Line
	8200 2650 9100 2650
Wire Wire Line
	8200 2750 9100 2750
Text GLabel 9100 2450 2    60   Input ~ 0
LIGHT_MOSI
Text GLabel 9100 2350 2    60   Output ~ 0
LIGHT_MISO
Text GLabel 9100 2250 2    60   Input ~ 0
LIGHT_SCK
Text GLabel 9100 2150 2    60   Input ~ 0
LIGHT_CS
Wire Wire Line
	8200 2150 9100 2150
Wire Wire Line
	9100 2250 8200 2250
Wire Wire Line
	8200 2350 9100 2350
Wire Wire Line
	9100 2450 8200 2450
Wire Wire Line
	5200 1600 4850 1600
Text GLabel 4850 1750 0    60   Input ~ 0
BOOT0
Wire Wire Line
	4850 1750 5200 1750
$Comp
L GNDPWR #PWR021
U 1 1 5663C587
P 5600 7350
F 0 "#PWR021" H 5600 7150 50  0001 C CNN
F 1 "GNDPWR" H 5600 7220 50  0000 C CNN
F 2 "" H 5600 7300 60  0000 C CNN
F 3 "" H 5600 7300 60  0000 C CNN
	1    5600 7350
	1    0    0    -1  
$EndComp
$Comp
L CP C13
U 1 1 5663C58D
P 6450 7100
F 0 "C13" H 6475 7200 50  0000 L CNN
F 1 "10uF" H 6475 7000 50  0000 L CNN
F 2 "TCKB:C_0805" H 6488 6950 30  0001 C CNN
F 3 "" H 6450 7100 60  0000 C CNN
	1    6450 7100
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR022
U 1 1 5663C594
P 4750 6700
F 0 "#PWR022" H 4750 6550 50  0001 C CNN
F 1 "+5V" H 4750 6840 50  0000 C CNN
F 2 "" H 4750 6700 60  0000 C CNN
F 3 "" H 4750 6700 60  0000 C CNN
	1    4750 6700
	1    0    0    -1  
$EndComp
$Comp
L CP C12
U 1 1 5663C59A
P 6200 7100
F 0 "C12" H 6225 7200 50  0000 L CNN
F 1 "33PF" H 6225 7000 50  0000 L CNN
F 2 "TCKB:C_0805" H 6238 6950 30  0001 C CNN
F 3 "" H 6200 7100 60  0000 C CNN
	1    6200 7100
	1    0    0    -1  
$EndComp
$Comp
L CP C10
U 1 1 5663C5A1
P 4750 7100
F 0 "C10" H 4775 7200 50  0000 L CNN
F 1 "33PF" H 4775 7000 50  0000 L CNN
F 2 "TCKB:C_0805" H 4788 6950 30  0001 C CNN
F 3 "" H 4750 7100 60  0000 C CNN
	1    4750 7100
	1    0    0    -1  
$EndComp
$Comp
L CP C11
U 1 1 5663C5A8
P 5000 7100
F 0 "C11" H 5025 7200 50  0000 L CNN
F 1 "10uF" H 5025 7000 50  0000 L CNN
F 2 "TCKB:C_0805" H 5038 6950 30  0001 C CNN
F 3 "" H 5000 7100 60  0000 C CNN
	1    5000 7100
	1    0    0    -1  
$EndComp
Wire Wire Line
	4750 6700 4750 6950
Wire Wire Line
	4750 6900 5150 6900
Connection ~ 4750 6900
Wire Wire Line
	5150 6750 4750 6750
Connection ~ 4750 6750
Wire Wire Line
	5000 6900 5000 6950
Connection ~ 5000 6900
Wire Wire Line
	5600 7350 5600 7100
$Comp
L GNDPWR #PWR023
U 1 1 5663C5BA
P 4750 7350
F 0 "#PWR023" H 4750 7150 50  0001 C CNN
F 1 "GNDPWR" H 4750 7220 50  0000 C CNN
F 2 "" H 4750 7300 60  0000 C CNN
F 3 "" H 4750 7300 60  0000 C CNN
	1    4750 7350
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR024
U 1 1 5663C5C0
P 6450 7350
F 0 "#PWR024" H 6450 7150 50  0001 C CNN
F 1 "GNDPWR" H 6450 7220 50  0000 C CNN
F 2 "" H 6450 7300 60  0000 C CNN
F 3 "" H 6450 7300 60  0000 C CNN
	1    6450 7350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4750 7250 4750 7350
Wire Wire Line
	5000 7250 5000 7300
Wire Wire Line
	5000 7300 4750 7300
Connection ~ 4750 7300
Wire Wire Line
	6450 7250 6450 7350
Wire Wire Line
	6200 7250 6200 7300
Wire Wire Line
	6200 7300 6450 7300
Connection ~ 6450 7300
Wire Wire Line
	6200 6950 6200 6750
NoConn ~ 6050 6900
$Comp
L ADP162AUJZ-3.3 U3
U 1 1 5663C5D1
P 5600 6800
F 0 "U3" H 5300 7050 40  0000 C CNN
F 1 "ADP162AUJZ-3.3" H 5600 7000 40  0000 C CNN
F 2 "TCKB:SOT-23-5" H 5600 6900 35  0000 C CIN
F 3 "" H 5600 6800 60  0000 C CNN
	1    5600 6800
	1    0    0    -1  
$EndComp
Text GLabel 1450 4450 0    60   Input ~ 0
LED_COL_1
Text GLabel 1450 4600 0    60   Input ~ 0
LED_COL_2
Text GLabel 1450 4750 0    60   Input ~ 0
LED_COL_3
Text GLabel 1450 4900 0    60   Input ~ 0
LED_COL_4
Text GLabel 1450 5050 0    60   Input ~ 0
LED_COL_5
Text GLabel 1450 5200 0    60   Input ~ 0
LED_COL_6
Text GLabel 1450 5350 0    60   Input ~ 0
LED_COL_7
Text GLabel 1450 5500 0    60   Input ~ 0
LED_COL_8
Text GLabel 1450 5650 0    60   Input ~ 0
LED_COL_9
Text GLabel 1450 5800 0    60   Input ~ 0
LED_COL_10
Text GLabel 1450 5950 0    60   Input ~ 0
LED_COL_11
Text GLabel 1450 6100 0    60   Input ~ 0
LED_COL_12
Text GLabel 1450 6250 0    60   Input ~ 0
LED_COL_13
Text GLabel 1450 4300 0    60   Input ~ 0
LED_COL_0
Text GLabel 3050 4450 2    60   Input ~ 0
LED_LINE_1
Text GLabel 3050 4600 2    60   Input ~ 0
LED_LINE_2
Text GLabel 3050 4750 2    60   Input ~ 0
LED_LINE_3
Text GLabel 3050 4900 2    60   Input ~ 0
LED_LINE_4
Text GLabel 3050 4300 2    60   Input ~ 0
LED_LINE_0
Wire Wire Line
	1450 4300 1600 4300
Wire Wire Line
	1600 4450 1450 4450
Wire Wire Line
	1450 4600 1600 4600
Wire Wire Line
	1600 4750 1450 4750
Wire Wire Line
	1450 4900 1600 4900
Wire Wire Line
	1600 5050 1450 5050
Wire Wire Line
	1450 5200 1600 5200
Wire Wire Line
	1600 5350 1450 5350
Wire Wire Line
	1600 5500 1450 5500
Wire Wire Line
	1450 5650 1600 5650
Wire Wire Line
	1600 5800 1450 5800
Wire Wire Line
	1450 5950 1600 5950
Wire Wire Line
	1600 6100 1450 6100
Wire Wire Line
	1450 6250 1600 6250
Wire Wire Line
	2900 4300 3050 4300
Wire Wire Line
	3050 4450 2900 4450
Wire Wire Line
	2900 4600 3050 4600
Wire Wire Line
	3050 4750 2900 4750
Wire Wire Line
	2900 4900 3050 4900
$Comp
L +3V3_AUX #PWR025
U 1 1 57F41FFA
P 6450 6700
F 0 "#PWR025" H 6450 6550 50  0001 C CNN
F 1 "+3V3_AUX" H 6450 6840 50  0000 C CNN
F 2 "" H 6450 6700 60  0000 C CNN
F 3 "" H 6450 6700 60  0000 C CNN
	1    6450 6700
	1    0    0    -1  
$EndComp
Wire Wire Line
	6050 6750 6450 6750
Wire Wire Line
	6450 6700 6450 6950
Connection ~ 6200 6750
Connection ~ 6450 6750
$Comp
L +3V3_AUX #PWR026
U 1 1 57F42CF9
P 6850 1100
F 0 "#PWR026" H 6850 950 50  0001 C CNN
F 1 "+3V3_AUX" H 6850 1240 50  0000 C CNN
F 2 "" H 6850 1100 60  0000 C CNN
F 3 "" H 6850 1100 60  0000 C CNN
	1    6850 1100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6850 1100 6850 1200
Connection ~ 6850 1200
$Comp
L +3V3_AUX #PWR027
U 1 1 57F43B08
P 9650 800
F 0 "#PWR027" H 9650 650 50  0001 C CNN
F 1 "+3V3_AUX" H 9650 940 50  0000 C CNN
F 2 "" H 9650 800 60  0000 C CNN
F 3 "" H 9650 800 60  0000 C CNN
	1    9650 800 
	1    0    0    -1  
$EndComp
Wire Wire Line
	9650 800  9650 850 
$Comp
L +3V3_AUX #PWR028
U 1 1 57F44909
P 9600 5100
F 0 "#PWR028" H 9600 4950 50  0001 C CNN
F 1 "+3V3_AUX" V 9600 5400 50  0000 C CNN
F 2 "" H 9600 5100 60  0000 C CNN
F 3 "" H 9600 5100 60  0000 C CNN
	1    9600 5100
	0    -1   -1   0   
$EndComp
Text GLabel 10050 5400 0    60   Input ~ 0
SWO_2
$Comp
L CP C18
U 1 1 57F817C3
P 9200 5750
F 0 "C18" H 9225 5850 50  0000 L CNN
F 1 "100nF" H 9225 5650 50  0000 L CNN
F 2 "TCKB:C_0805" H 9238 5600 30  0001 C CNN
F 3 "" H 9200 5750 60  0000 C CNN
	1    9200 5750
	1    0    0    -1  
$EndComp
$Comp
L STRIP_8P STRIP2
U 1 1 57F817CE
P 10300 5100
F 0 "STRIP2" V 10600 4650 50  0000 L CNN
F 1 "STRIP_8P" H 10450 5200 50  0000 C BNN
F 2 "TCKB:SlantedStrip8p" H 10450 5100 60  0001 C CNN
F 3 "" H 10450 5100 60  0000 C CNN
	1    10300 5100
	1    0    0    -1  
$EndComp
$Comp
L GNDPWR #PWR029
U 1 1 57F908DC
P 10200 5600
F 0 "#PWR029" H 10200 5400 50  0001 C CNN
F 1 "GNDPWR" V 10200 5350 50  0000 C CNN
F 2 "" H 10200 5550 60  0000 C CNN
F 3 "" H 10200 5550 60  0000 C CNN
	1    10200 5600
	0    1    -1   0   
$EndComp
Wire Wire Line
	9600 5100 10300 5100
Wire Wire Line
	10300 5200 10050 5200
$Comp
L GNDPWR #PWR030
U 1 1 57F908EE
P 9200 5950
F 0 "#PWR030" H 9200 5750 50  0001 C CNN
F 1 "GNDPWR" H 9200 5820 50  0000 C CNN
F 2 "" H 9200 5900 60  0000 C CNN
F 3 "" H 9200 5900 60  0000 C CNN
	1    9200 5950
	1    0    0    -1  
$EndComp
Text Notes 9750 5050 0    118  ~ 0
SWD
Text Notes 9800 6050 0    60   ~ 0
Bootloader
Wire Wire Line
	8900 5500 10300 5500
Wire Wire Line
	10050 5700 10300 5700
Wire Wire Line
	10300 5800 10050 5800
Wire Wire Line
	9200 5600 9200 5500
Connection ~ 9200 5500
Wire Wire Line
	9200 5950 9200 5900
Wire Notes Line
	10700 4850 10700 6200
Wire Notes Line
	10700 6200 8500 6200
Wire Notes Line
	8500 6200 8500 4850
Wire Notes Line
	8500 4850 10700 4850
Wire Wire Line
	10300 5300 10050 5300
Wire Wire Line
	10050 5400 10300 5400
Wire Wire Line
	10300 5600 10200 5600
Wire Wire Line
	6850 4900 6850 4800
Connection ~ 6850 4800
$Sheet
S 1600 4200 1300 2200
U 5663F00B
F0 "Led_Matrix" 60
F1 "Led_Matrix.sch" 60
F2 "LED_LINE_1" I R 2900 4450 60 
F3 "LED_LINE_2" I R 2900 4600 60 
F4 "LED_LINE_3" I R 2900 4750 60 
F5 "LED_LINE_4" I R 2900 4900 60 
F6 "LED_COL_1" I L 1600 4450 60 
F7 "LED_COL_2" I L 1600 4600 60 
F8 "LED_COL_3" I L 1600 4750 60 
F9 "LED_COL_4" I L 1600 4900 60 
F10 "LED_COL_6" I L 1600 5200 60 
F11 "LED_COL_7" I L 1600 5350 60 
F12 "LED_COL_8" I L 1600 5500 60 
F13 "LED_COL_9" I L 1600 5650 60 
F14 "LED_COL_5" I L 1600 5050 60 
F15 "LED_COL_10" I L 1600 5800 60 
F16 "LED_COL_11" I L 1600 5950 60 
F17 "LED_COL_12" I L 1600 6100 60 
F18 "LED_COL_13" I L 1600 6250 60 
F19 "LED_LINE_0" I R 2900 4300 60 
F20 "LED_COL_0" I L 1600 4300 60 
$EndSheet
Text GLabel 8450 2050 2    60   Input ~ 0
DIS_BKLIGHT
Text GLabel 4700 4250 0    60   Output ~ 0
LED_LINE_1
Text GLabel 8450 3250 2    60   Output ~ 0
LED_LINE_2
Text GLabel 4700 3250 0    60   Output ~ 0
LED_LINE_3
Text GLabel 4700 3350 0    60   Output ~ 0
LED_LINE_4
Text GLabel 4700 4150 0    60   Output ~ 0
LED_LINE_0
Text GLabel 4700 2950 0    60   Output ~ 0
LED_COL_1
Text GLabel 4700 3050 0    60   Output ~ 0
LED_COL_2
Text GLabel 4700 3850 0    60   Output ~ 0
LED_COL_3
Text GLabel 4700 3950 0    60   Output ~ 0
LED_COL_4
Text GLabel 4700 4050 0    60   Output ~ 0
LED_COL_5
Text GLabel 4700 4350 0    60   Output ~ 0
LED_COL_6
Text GLabel 8450 2550 2    60   Output ~ 0
LED_COL_7
Text GLabel 8450 2850 2    60   Output ~ 0
LED_COL_8
Text GLabel 8450 2950 2    60   Output ~ 0
LED_COL_9
Text GLabel 4700 3450 0    60   Output ~ 0
LED_COL_10
Text GLabel 4700 3550 0    60   Output ~ 0
LED_COL_11
Text GLabel 4700 3650 0    60   Output ~ 0
LED_COL_12
Text GLabel 4700 3750 0    60   Output ~ 0
LED_COL_13
Text GLabel 4700 2850 0    60   Output ~ 0
LED_COL_0
Wire Wire Line
	4850 3150 5200 3150
Wire Wire Line
	4700 2850 5200 2850
Wire Wire Line
	4700 2950 5200 2950
Wire Wire Line
	5200 3050 4700 3050
Wire Wire Line
	4700 3850 5200 3850
Wire Wire Line
	5200 3950 4700 3950
Wire Wire Line
	4700 4050 5200 4050
Wire Wire Line
	5200 4150 4700 4150
Wire Wire Line
	4700 4250 5200 4250
Wire Wire Line
	4700 4350 5200 4350
Wire Wire Line
	8200 2550 8450 2550
Wire Wire Line
	8200 2850 8450 2850
Wire Wire Line
	8450 2950 8200 2950
Wire Wire Line
	8200 3250 8450 3250
Wire Wire Line
	4700 3250 5200 3250
Wire Wire Line
	5200 3350 4700 3350
Wire Wire Line
	4700 3450 5200 3450
Wire Wire Line
	5200 3550 4700 3550
Wire Wire Line
	4700 3650 5200 3650
Wire Wire Line
	5200 3750 4700 3750
Wire Wire Line
	8200 2050 8450 2050
Text GLabel 8450 1950 2    60   Input ~ 0
TBD
Wire Wire Line
	8200 1950 8450 1950
NoConn ~ 5200 1950
NoConn ~ 5200 2100
NoConn ~ 5200 2500
NoConn ~ 5200 2600
NoConn ~ 5200 2700
NoConn ~ 8200 1750
NoConn ~ 8200 1850
$EndSCHEMATC
